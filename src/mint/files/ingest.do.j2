* Data ingestion for {{ project_name }}
*
* This do-file handles downloading and initial processing of raw data.
*
* Data flow:
* Raw data → data/raw/
* Clean data → data/clean/
* Intermediate → data/intermediate/

// Set up directories
capture program drop set_directories
program define set_directories
    local dirs "raw clean intermediate"

    foreach dir of local dirs {
        capture mkdir "data/`dir'", public
    }

    display "Directories ready:"
    display "  Raw data: data/raw/"
    display "  Clean data: data/clean/"
    display "  Intermediate: data/intermediate/"
end

// Main ingestion program
capture program drop main
program define main
    display "Starting data ingestion for {{ project_name }}..."

    set_directories

    // TODO: Implement data ingestion logic
    // - Download data using copy/copyfiles
    // - Extract archives using unzip
    // - Initial validation using insheet/import
    // - Save to data/raw/

    // Example:
    // // Download data
    // copy "https://example.com/data.csv" "data/raw/downloaded_data.csv", replace
    //
    // // Quick validation
    // import delimited "data/raw/downloaded_data.csv", clear
    // describe
    // display "Downloaded " c(N) " observations"

    display "Data ingestion completed successfully."
end

// Run if called directly
if "`c(mode)'" != "batch" {
    main
}